!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.InfiniteScroll=t(require("react")):e.InfiniteScroll=t(e.react)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o);t["default"]=a["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(2);var c=n(3),p=r(c),f=n(4),d=n(5),h=function(e){function t(e){i(this,t);var n=s(this,Object.getPrototypeOf(t).call(this,e)),r=Array.apply(void 0,a(Array(5))).map(function(t,n){var r=(0,f.nextTime)(e.startDate,n-2);return{name:(0,f.getTimeName)(r),value:r,angle:22.5*(2-n)}});return n.animating=!1,n.touchY=0,n.angle=0,n.state={angle:0,dates:r},n.handleFinishBtnClick=n.handleFinishBtnClick.bind(n),n.renderDatepickerItem=n.renderDatepickerItem.bind(n),n.handleContentTouch=n.handleContentTouch.bind(n),n.handleContentTransitionEnd=n.handleContentTransitionEnd.bind(n),n._moveToNext=n._moveToNext.bind(n),n}return l(t,e),u(t,[{key:"_setOpacity",value:function(e){return e>0?((40-e)/40*100|0)/100:((40+e)/40*100|0)/100}},{key:"_clearTransition",value:function(e){e.style[d.TRANSITION]=""}},{key:"_moveToNext",value:function(e){var t=this.refs.scroll,n=this.angle;1===e?this._moveTo(t,n+22.5):this._moveTo(t,n-22.5)}},{key:"_moveTo",value:function(e,t){this.animating=!0,e.style[d.TRANSITION]=d.TRANSFORM_CSS+" .2s ease-out",this.setState({angle:t})}},{key:"handleFinishBtnClick",value:function(){var e=this,t=this.state.dates.find(function(t){return t.angle+e.state.angle===0});this.props.onSelect(t.value),this.props.onCancel()}},{key:"handleContentTouch",value:function(e){if(e.preventDefault(),!this.animating)if("touchstart"===e.type)this.touchY=e.targetTouches[0].pageY,this.angle=this.state.angle;else if("touchmove"===e.type){var t=e.targetTouches[0].pageY,n=t-this.touchY,r=this.angle-parseInt(22.5*n/180,10);this.setState({angle:r})}else if("touchend"===e.type){var o=e.changedTouches[0].pageY,a=o-this.touchY,i=a>0?-1:1;1===i&&this.props.touchLen<-a||i===-1&&this.props.touchLen<a?this._moveToNext(i):this._moveTo(this.refs.scroll,this.angle)}}},{key:"handleContentTransitionEnd",value:function(){var e=this.state,t=e.dates,n=e.angle,r=t.find(function(e){return e.angle+n===0}),o=Array.apply(void 0,a(Array(5))).map(function(e,t){var n=(0,f.nextTime)(r.value,t-2);return{name:(0,f.getTimeName)(n),value:n,angle:22.5*(2-t)}});this.animating=!1,this._clearTransition(this.refs.scroll),this.setState({dates:o,angle:0})}},{key:"renderDatepickerItem",value:function(e){var t,n=(t={},o(t,d.TRANSFORM,"rotateX("+e.angle+"deg) translate3d(0,0,100px)"),o(t,"opacity",this._setOpacity(e.angle+this.state.angle)),o(t,"color",this.props.dateColor),t);return p["default"].createElement("li",{key:e.value,style:n},e.name)}},{key:"render",value:function(){var e=this.props.layerBackground,t=o({},d.TRANSFORM,"rotateX("+this.state.angle+"deg)"),n={display:this.props.isOpen?"":"none",backgroundColor:e};return p["default"].createElement("div",{className:"datepicker",style:n},p["default"].createElement("p",{className:"datepicker-navbar"},p["default"].createElement("span",{className:"datepicker-finish-btn",onClick:this.handleFinishBtnClick},"完成")),p["default"].createElement("div",{ref:"parent",className:"datepicker-content",onTouchStart:this.handleContentTouch,onTouchMove:this.handleContentTouch,onTouchEnd:this.handleContentTouch,onTransitionEnd:this.handleContentTransitionEnd},p["default"].createElement("div",{className:"datepicker-viewport"},p["default"].createElement("ul",{ref:"scroll",className:"datepicker-scroll",style:t},this.state.dates.map(this.renderDatepickerItem)))))}}]),t}(c.Component);h.propTypes={touchLen:c.PropTypes.number,btnColor:c.PropTypes.string,dateColor:c.PropTypes.string,layerBackground:c.PropTypes.string,isOpen:c.PropTypes.bool,startDate:c.PropTypes.oneOfType([c.PropTypes.object,c.PropTypes.number]),minDate:c.PropTypes.oneOfType([c.PropTypes.object,c.PropTypes.number]),onSelect:c.PropTypes.func,onCancel:c.PropTypes.func},h.defaultProps={touchLen:40,dateColor:"#fff",layerBackground:"#ffa70b",startDate:new Date,minDate:new Date(2016,3,7),onSelect:function(){},onCancel:function(){}},t["default"]=h},function(e,t){},function(t,n){t.exports=e},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=new Date(e),r=n.getFullYear(),o=n.getMonth()+1,a=n.getDate(),i=n.getHours(),s=n.getMinutes(),l=n.getSeconds();return t.replace(/Y+/,r).replace(/M+/,o).replace(/D+/,a).replace(/h+/,i).replace(/m+/,s).replace(/s+/,l)}function o(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1];if("[object Date]"!==Object.prototype.toString.call(e,null))throw new Error("参数类型不对");var n=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n.setDate(e.getDate()+t),n}function a(e){var t;if("[object Date]"!==Object.prototype.toString.call(e,null))throw new Error("参数类型不对");var a=(t={},n(t,r((new Date).getTime(),"YYYY-MM-DD"),"今天"),n(t,r(o(new Date,-1).getTime(),"YYYY-MM-DD"),"昨天"),t),i=e.getTime(),s=r(i,"YYYY-MM-DD");return a[s]?a[s]:s}Object.defineProperty(t,"__esModule",{value:!0}),t.nextTime=o,t.getTimeName=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=null,o=null;"string"==typeof document.body.style.transition?(t.TRANSITION=n="transition",t.TRANSITIONEND=r="transitionend",t.TRANSITION_CSS=o="transition"):"string"==typeof document.body.style.webkitTransition&&(t.TRANSITION=n="webkitTransition",t.TRANSITION_CSS=o="-webkit-transition",t.TRANSITIONEND=r="webkitTransitionEnd");var a=null,i=null;"string"==typeof document.body.style.transform?(t.TRANSFORM=a="transform",t.TRANSFORM_CSS=i="transform"):"string"==typeof document.body.style.webkitTransform&&(t.TRANSFORM=a="webkitTransform",t.TRANSFORM_CSS=i="-webkit-transform"),t.TRANSITION=n,t.TRANSITIONEND=r,t.TRANSITION_CSS=o,t.TRANSFORM=a,t.TRANSFORM_CSS=i}])});