!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):e.reactMobileDatePicker=t(e.React,e.ReactDOM)}(this,function(e,t){"use strict";function n(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),n.appendChild(o),t}function o(e,t){var n=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),a=e.getHours(),i=e.getMinutes(),s=e.getSeconds();return t.replace(/Y+/,n).replace(/M+/,o).replace(/D+/,r).replace(/h+/,a).replace(/m+/,i).replace(/s+/,s)}function r(e){if("[object Date]"!==Object.prototype.toString.call(e,null))throw new Error("参数类型不对")}function a(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];r(e);var n=new Date(e.getFullYear()+t,e.getMonth(),e.getDate());return n}function i(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];r(e);var n=new Date(e.getFullYear(),e.getMonth()+t,e.getDate());return n}function s(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];r(e);var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t);return n}function p(e,t){r(e);var n={Year:["YYYY","年"],Month:["MM","月"],Date:["DD","日"]};if(!n[t])throw new Error("类型不对");var a={value:parseInt(o(e,n[t][0]),10),suffix:n[t][1]};return a}function l(e){var t=e.isOpen,n=D(e,["isOpen"]);return d.createElement("div",{style:{display:t?"":"none"},className:"datepicker-modal"},d.createElement(P,n))}function c(e){return d.createElement(w,e,d.createElement(l,null))}var d="default"in e?e.default:e;t="default"in t?t.default:t,n(".datepicker-modal {\n    position: fixed;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,.6);\n    z-index: 999;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n\n.datepicker {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 1;\n    border-top: 2px solid rgb(215,212,212);\n    height: 244px;\n    font-size: 12px;\n}\n\n.datepicker .datepicker-navbar {\n    background: rgba(242, 241, 240, 0.3);\n    padding: 0.5em 0.8em;\n    text-align: right;\n}\n\n.datepicker .datepicker-finish-btn {\n    font: 1.2em/17px 微软雅黑;\n}\n\n.datepicker .datepicker-content {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    position: absolute;\n    top: 39px;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: 0 .5em .5em .5em;\n}\n\n.datepicker .datepicker-viewport {\n    padding-top: 84px;\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    background-image: -webkit-linear-gradient(top, rgba(255, 255, 255, 0.2) 20%, rgba(255, 255, 255, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\n    background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.2) 20%, rgba(255, 255, 255, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\n    margin: 0 0.5em;\n}\n\n.datepicker .datepicker-scroll {\n    -webkit-transform-style: preserve-3d;\n            transform-style: preserve-3d;\n    -webkit-perspective: 800px;\n            perspective: 800px;\n    position: relative;\n    list-style-type: none;\n    height: 33px;\n    z-index: -1;\n}\n\n.datepicker .datepicker-scroll>li {\n    text-align: center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    font-size: 1.5em;\n    width: 100%;\n    line-height: 35px;\n}\n",void 0);var u=Object.freeze({convertDate:o,nextYear:a,nextMonth:i,nextDate:s,getTime:p}),h=null,m=null,f=null;"string"==typeof document.body.style.transition?(h="transition",m="transitionend",f="transition"):"string"==typeof document.body.style.webkitTransition&&(h="WebkitTransition",f="-webkit-transition",m="webkitTransitionEnd");var y=null,g=null;"string"==typeof document.body.style.transform?(y="transform",g="transform"):"string"==typeof document.body.style.webkitTransform&&(y="WebkitTransform",g="-webkit-transform");var b=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},T=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},D=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},x=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},k=function(e){function t(n){b(this,t);var o=x(this,e.call(this,n));return o.animating=!1,o.touchY=0,o.angle=0,o.renderDatepickerItem=o.renderDatepickerItem.bind(o),o.handleContentTouch=o.handleContentTouch.bind(o),o.handleContentTransitionEnd=o.handleContentTransitionEnd.bind(o),o.state={angle:0},o}return T(t,e),t.prototype.componentWillMount=function(){var e=this,t=Array.apply(void 0,Array(5)).map(function(t,n){var o=u["next"+e.props.typeName](e.props.date.value,n-2);return v({},p(o,e.props.typeName),{angle:22.5*(2-n)})});this.setState({dates:t})},t.prototype.componentWillReceiveProps=function(e){var t=this.refs.scroll,n=this.angle,o=this.props.typeName,r=this.props.date[o].value,a=e.date[o].value,i=this.props.date.timestamp,s=e.date.timestamp,p=void 0;a>r&&s>i||a<r&&s>i?p=1:(a>r&&s<i||a<r&&s<i)&&(p=-1),p&&this._moveTo(t,n+22.5*p)},t.prototype._setOpacity=function(e){return e>0?((40-e)/40*100|0)/100:((40+e)/40*100|0)/100},t.prototype._clearTransition=function(e){e.style[h]=""},t.prototype._moveToNext=function(e){var t=this.props,n=t.typeName,o=t.date,r=t.maxDate,a=t.minDate,i=u["next"+n](o.value,e),s=1===e?i.getTime()<=r.timestamp:i.getTime()>=a.timestamp;s?this.props.onSelect(i):this._moveTo(this.refs.scroll,this.angle)},t.prototype._moveTo=function(e,t){this.animating=!0,e.style[h]="all .2s ease-out",this.setState({angle:t})},t.prototype.handleContentTouch=function(e){if(e.preventDefault(),!this.animating)if("touchstart"===e.type)this.touchY=e.targetTouches[0].pageY,this.angle=this.state.angle;else if("touchmove"===e.type){var t=e.targetTouches[0].pageY,n=t-this.touchY,o=this.angle-parseInt(22.5*n/180,10);this.setState({angle:o})}else if("touchend"===e.type){var r=e.changedTouches[0].pageY,a=r-this.touchY,i=a>0?-1:1;1===i&&this.props.touchLen<-a||i===-1&&this.props.touchLen<a?this._moveToNext(i):this._moveTo(this.refs.scroll,this.angle)}},t.prototype.handleContentTransitionEnd=function(){var e=this,t=this.props.date,n=Array.apply(void 0,Array(5)).map(function(n,o){var r=u["next"+e.props.typeName](t.value,o-2);return v({},p(r,e.props.typeName),{angle:22.5*(2-o)})});this.animating=!1,this._clearTransition(this.refs.scroll),this.setState({dates:n,angle:0})},t.prototype.renderDatepickerItem=function(e,t){var n,o=(n={},n[y]="rotateX("+e.angle+"deg) translate3d(0,0,100px)",n.opacity=this._setOpacity(e.angle+this.state.angle),n.color=this.props.dateColor,n);return d.createElement("li",{key:t,style:o},e.value,e.suffix)},t.prototype.render=function(){var e,t=(e={},e[y]="rotateX("+this.state.angle+"deg)",e);return d.createElement("div",{className:"datepicker-viewport",onTouchStart:this.handleContentTouch,onTouchMove:this.handleContentTouch,onTouchEnd:this.handleContentTouch,onTransitionEnd:this.handleContentTransitionEnd},d.createElement("ul",{ref:"scroll",className:"datepicker-scroll",style:t},this.state.dates.map(this.renderDatepickerItem)))},t}(e.Component);k.propTypes={date:e.PropTypes.object,minDate:e.PropTypes.object,maxDate:e.PropTypes.object,typeName:e.PropTypes.string,touchLen:e.PropTypes.number,dateColor:e.PropTypes.string,onSelect:e.PropTypes.func};var P=function(e){function t(n){b(this,t);var o=x(this,e.call(this,n));return o.state={date:o._productDate(n.date),minDate:o._productDate(n.minDate),maxDate:o._productDate(n.maxDate)},o.handleFinishBtnClick=o.handleFinishBtnClick.bind(o),o.handleDateSelect=o.handleDateSelect.bind(o),o}return T(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({date:this._productDate(e.date),minDate:this._productDate(e.minDate),maxDate:this._productDate(e.maxDate)})},t.prototype._productDate=function(e){var t=s(e,0);return{value:t,timestamp:t.getTime(),Year:p(t,"Year"),Month:p(t,"Month"),Date:p(t,"Date")}},t.prototype.handleFinishBtnClick=function(){this.props.onSelect(this.state.date.value)},t.prototype.handleDateSelect=function(e){this.setState({date:this._productDate(e)})},t.prototype.render=function(){var e=this.props,t=e.layerBackground,n=e.btnColor,o=e.touchLen,r=e.dateColor,a=this.state,i=a.date,s=a.minDate,p=a.maxDate,l={backgroundColor:t};return d.createElement("div",{className:"datepicker",style:l},d.createElement("p",{className:"datepicker-navbar"},d.createElement("span",{style:{color:n},className:"datepicker-finish-btn",onClick:this.handleFinishBtnClick},"完成")),d.createElement("div",{className:"datepicker-content"},d.createElement(k,{date:i,typeName:"Year",minDate:s,maxDate:p,touchLen:o,dateColor:r,onSelect:this.handleDateSelect}),d.createElement(k,{date:i,typeName:"Month",minDate:s,maxDate:p,touchLen:o,dateColor:r,onSelect:this.handleDateSelect}),d.createElement(k,{date:i,typeName:"Date",minDate:s,maxDate:p,touchLen:o,dateColor:r,onSelect:this.handleDateSelect})))},t}(e.Component);P.propTypes={touchLen:e.PropTypes.number,btnColor:e.PropTypes.string,dateColor:e.PropTypes.string,layerBackground:e.PropTypes.string,date:e.PropTypes.object,minDate:e.PropTypes.object,maxDate:e.PropTypes.object,onSelect:e.PropTypes.func};var C=t.unstable_renderSubtreeIntoContainer,w=function(e){function n(){return b(this,n),x(this,e.apply(this,arguments))}return T(n,e),n.prototype.componentDidMount=function(){this._div=document.createElement("div"),this._div.classList.add("Modal-Portal"),document.body.appendChild(this._div),this.renderPortal(this.props)},n.prototype.componentWillReceiveProps=function(e){this.renderPortal(e)},n.prototype.componentWillUnmount=function(){t.unmountComponentAtNode(this._div),this._div.parentNode.removeChild(this._div)},n.prototype.renderPortal=function(e){var t=d.cloneElement(this.props.children,v({},e,{key:"portal"}),null);this.portal=C(this,t,this._div)},n.prototype.render=function(){return d.createElement("noscript",null)},n}(e.Component);return w.propTypes={children:e.PropTypes.node,isOpen:e.PropTypes.bool},w.defaultProps={isOpen:!1},c.propTypes={isOpen:e.PropTypes.bool,touchLen:e.PropTypes.number,btnColor:e.PropTypes.string,dateColor:e.PropTypes.string,layerBackground:e.PropTypes.string,date:e.PropTypes.object,minDate:e.PropTypes.object,maxDate:e.PropTypes.object,onSelect:e.PropTypes.func},c.defaultProps={touchLen:40,dateColor:"#fff",btnColor:"#fff",layerBackground:"#ffa70b",isOpen:!1,date:new Date,minDate:new Date(1970,0,1),maxDate:new Date(2050,0,1),onSelect:function(){}},c});
//# sourceMappingURL=react-mobile-datepicker.min.js.map